<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <title>空模板</title>
    <meta content="" name="Keywords">
    <meta content="" name="Description">
    <meta name="format-detection" content="telephone=no">
    <link href="/ui-template/favicon.ico" rel="icon">
<link href="/ui-template/css/style.css" rel="stylesheet">
<script type="text/javascript">
	if(window.location.href.indexOf('https')===0){
		document.write('<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />');
	}
</script>
<!--[if lt IE 9]><script src="/ui-template/lib/H5shiv.js"></script><![endif]-->
</head>
<body>
    <style>
    body,html{height: 100%;}
    body {
        background: url("http://hpimges.blob.core.chinacloudapi.cn/coverstory/watermark_aidlingerhoehe_zh-cn11764360351_1920x1080.jpg") center no-repeat;
        background-size:cover;
    }
    
    .startmenu {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 500px;
        height: 600px;
        background: rgba(0, 0, 0, .3);
        padding: 20px;
        max-height: 100%;
    }
    
    .flex-cell {
        height: 140px;
        transition: all ease 1s;
        margin: 4px;
        text-align: center;
    }
    
    .flex-cell.dragstart {
        opacity: 0;
    }
    </style>
    <div class="startmenu" id="wrapper">
        <div class="flex-row">
            <div class="flex-1 flex-cell flex-col justify-center bg-primary" draggable="true">Your APP</div>
            <div class="flex-1 flex-cell flex-col justify-center bg-success" draggable="true">Your APP</div>
            <div class="flex-1 flex-cell flex-col justify-center bg-success" draggable="true">Your APP</div>
        </div>
        <div class="flex-row">
            <div class="flex-1 flex-cell flex-col justify-center bg-info" draggable="true">Your APP</div>
            <div class="flex-1 flex-cell flex-col justify-center bg-warning" draggable="true">Your APP</div>
        </div>
        <div class="flex-row">
            <div class="flex-1 flex-cell flex-col justify-center bg-danger" draggable="true">Your APP</div>
            <div class="flex-1 flex-cell flex-col justify-center bg-primary" draggable="true">Your APP</div>
            <div class="flex-1 flex-cell flex-col justify-center bg-success" draggable="true">Your APP</div>
        </div>
    </div>
    
    <script src="/ui-template/lib/sea.js" id="seajsnode"></script>
<script src="/ui-template/seajs.config.js"></script>
    <script>
    /**
     * index
     */
    define('startmenu', function(require) {
        var $ = require('jquery');

        var dragshadow = $('<div id="dragshadow" style="position:absolute;z-index:99;overflow:hidden;pointer-events:none" />').appendTo('body');
        var documentMoveInit;
        var dragData;
        var clearnode = function(that) {
            $(that).removeClass('dragstart');
            documentMoveInit = null;
            dragshadow
                .empty()
                .css({
                    width: 0,
                    height: 0,
                    left: 0,
                    top: 0
                })
                .get(0).style.transform = '';
        };
        $('#wrapper')
            .find('.flex-cell').each(function(i, e) {
                $(e).attr('id', 'wrapper-drag-cell-' + i);
            })
            .end()
            .on('mousedown', '.flex-cell', function(e) {
                var dragele = $(this);
                documentMoveInit = {
                    left: e.originalEvent.pageX,
                    top: e.originalEvent.pageY
                };
                dragshadow
                    .css({
                        width: dragele.outerWidth(true),
                        height: dragele.outerHeight(true),
                        left: dragele.offset().left,
                        top: dragele.offset().top
                    })
                    .html(dragele.get(0).outerHTML);
                dragele.addClass('dragstart');
            })
            .on('dragstart', '.flex-cell', function(e) {
                e.originalEvent.dropEffect = "move";
                dragData = $(this).attr('id');
                e.originalEvent.dataTransfer.setData('text/plain', $(this).attr('id'));
            })
            .on('dragover', '.flex-cell', function(e) {
                e.preventDefault();
                var step = 'translate(' + (e.originalEvent.pageX - documentMoveInit.left) + 'px,' + (e.originalEvent.pageY - documentMoveInit.top) + 'px)';
                dragshadow.get(0).style.transform = step;
                var dropdata = dragData; //e.originalEvent.dataTransfer.getData('text/plain');
                var target = $('#' + dropdata);
                var mycenter = parseInt($(this).offset().left) + $(this).outerWidth() / 2;
                //console.log(mycenter);
                if (e.originalEvent.pageX > mycenter) {
                    $(this).after(target);
                } else {
                    $(this).before(target);
                }
            })
            .on('dragend', '.flex-cell', function(e) {
                e.preventDefault();
                clearnode(this);
            })
            .on('mouseup', '.flex-cell', function(e) {
                clearnode(this);
            });
    });
    seajs.use('startmenu');
    </script>
</body>
</html>
